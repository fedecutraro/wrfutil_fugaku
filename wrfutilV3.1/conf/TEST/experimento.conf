#Librerias bash adicionales 
source ${BASEDIR}/lib/timeutils.sh                                                                     #Libreria con funciones para fechas.

######
## Controles
#####
export EJECUTAR=1							# 0=NO EJECUTA, solo genera los script del sistma de cola para su posterior encolado manual 
export GUARDOWRFOUT=1							# 0=NO GUARDA, cuando se borran los miembros se pierden los wrfout
export ASIMILACION=1							# 1 = Si es un experimento de Asimilacion
export PERTURBAR=0							# Determina si se utilizaran METs perturbados (=1). 
									#	Si se corre el WPS entonces, prepara el directorio para perturbar
									#	en el modulo_Fcst.sh activa el correr_PERT.sh
##############
# Datos de GFS
##############
export GFSPREFIX='pgrb2b'
export GFS_CICLO_INI='00'                                            
export GFS_MIEMBRO_INI=01                                               #Miembro inicial del GFS (Determina el rango de miembros que vamos a usar del GFS)
export GFS_MIEMBRO_FIN=03                                               #Miembro final del GFS


#############  
### Dominio y Tiempo  de Pronostico 
############## 
if [ $PERTURBAR -eq 0 ] ; then	
  export MIEMBRO_INI=$GFS_MIEMBRO_INI
  export MIEMBRO_FIN=$GFS_MIEMBRO_FIN
else 
  export MIEMBRO_INI=01							# Miembro Inicial del ensamble (RECUERDE COMENZAR DESDE 01, el 00 esta reservado para deterministico)	
  export MIEMBRO_FIN=03 						# Miembro Final del ensamble
fi 
export NAMELIST_TIPO=ens						# Extencion de namelist que sera usada para WRF	 det(erministico)|ens(amble)|letkf-(asimilacion)
export FECHA_INI='2018-11-20 00:00:00'                                  # Formato YYYY-MM-DD hh:mm:ss [queda fija, es la fecha inicial del experimento]
export FECHA_FIN='2018-11-20 06:00:00'                                  # Formato YYYY-MM-DD hh:mm:ss [queda fija, es la fecha final del experimento]
export INTERVALO_GFS=21600						# Intervalo en minutos archivos del GFS ensamble (01 ... )  [segundos]
export INTERVALO_INI_GFS=21600                                          # Frecuencia de inicializacion del GFS (actualmente 6 horas) [segundos]
export INTERVALO_WPS=21600						# Intervalo en minutos archivos met_em [segundos]
export INTERVALO_WRF=21600						# Intervalo en minutos de Salida del WRF [segundos]

##############
# Paralelizacion
##############
export WPSNODE=1
export WPSPROC=1							# Cantidad de procesos  para el GEOGRID/METGRID
export WPSTHREADS=1							# Cantidad de threads  por proceso GEOGRID/METGRID
export WPSWALLTIME="01:00:00"						# Tiempo estimado en HH:MM:SS que el proceso durara como maximo

export PERTNODE=1
export PERTPROC=1							# Cantidad de procesos  para el GEOGRID/METGRID
export PERTPPN=1
export PERTTHREADS=10							# Cantidad de threads  por proceso GEOGRID/METGRID
export PERTWALLTIME="00:25:00"						# Tiempo estimado en HH:MM:SS que el proceso durara como maximo

export WRFNODE=1
export WRFPROC=48							# Cantidad de procesos  para el WRF
export WRFTHREADS=1							# Cantidad de threads por proceso del WRF
export WRFWALLTIME="04:00:00"						# Tiempo estimado en HH:MM:SS que el proceso durara como maximo

export POSTNODE=1
export POSTPROC=8                                                       # Cantidad de procesos  para el NPP- esta fijo en el codigo python - no se modifica de aca
export POSTTHREADS=1                                                    # Cantidad de threads por porceso del NPP
export POSTPPN=8                                                        # Cantidad de threads por porceso del NPP
export POSTWALLTIME="06:00:00"						# Tiempo estimado en HH:MM:SS que el proceso durara como maximo

export WRFUTILEXP=1

[[ $ASIMILACION -ne 0 ]] && source $BASEDIR/conf/experimento.asim
