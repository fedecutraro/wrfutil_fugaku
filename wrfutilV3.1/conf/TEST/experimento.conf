#Librerias bash adicionales 
source ${BASEDIR}/lib/timeutils.sh                                      #Libreria con funciones para fechas.

######
## Controles
#####
export GUARDOWRFOUT=1							# 0=NO GUARDA, cuando se borran los miembros se pierden los wrfout

##############
# Datos de los bordes
##############
export BDYPREFIX='pgrb2b'                    
export BDYSEARCHSTRING='g*pgrb2f*'                                      #String to be used to search grib files in the given directory. 
export BDY_MIEMBRO_INI=00                                               #Miembro inicial de los bordes (Determina el rango de miembros que vamos a usar de los datos de bordes )
export BDY_MIEMBRO_FIN=20                                               #Miembro final de los bordes
export BDYVTABLE='Vtable.ENS'                                           #Vtable to be used to ungrib bdy data.
export INTERVALO_BDY=21600                                              # Intervalo en minutos archivos del ensamble usado para condiciones de borde [segundos]
export INTERVALO_INI_BDY=21600                                          # Frecuencia de inicializacion de las condiciones de borde (actualmente 6 horas) [segundos]

export BDY_PERT=1                                                       # Determina si se aplican perturbaciones adicionales a las condiciones de borde [=1]
                                                                        #
#Number of ensemble members                                             
if [ $BDY_PERT -eq 0 ] ; then
  #The ensemble size depends on the available boundary conditions.
  export MIEMBRO_INI=$BDY_MIEMBRO_INI
  export MIEMBRO_FIN=$BDY_MIEMBRO_FIN
else
  #The ensemble size can be larger than the number of available boundary conditions.
  export MIEMBRO_INI=00                                                 # Miembro Inicial del ensamble    
  export MIEMBRO_FIN=41                                                 # Miembro Final del ensamble
fi

#############  
### Dominio y Tiempo  de Pronostico 
############## 
export NAMELIST_TIPO=ens						# Extencion de namelist que sera usada para WRF	 det(erministico)|ens(amble)|letkf-(asimilacion)
export FECHA_INI='2018-11-20 00:00:00'                                  # Formato YYYY-MM-DD hh:mm:ss [queda fija, es la fecha inicial del experimento]
export FECHA_FIN='2018-11-20 06:00:00'                                  # Formato YYYY-MM-DD hh:mm:ss [queda fija, es la fecha final del experimento]
export INTERVALO_WPS=21600						# Intervalo en minutos archivos met_em [segundos]
export INTERVALO_WRF=21600						# Intervalo en minutos de Salida del WRF [segundos]

#############  
### Additional boundary perturbations scheme
############## 
export TARGET_ENSEMBLE_SIZE=$(($MIEMBRO_FIN-$MIEMBRO_INI))+1            #The number of ensemble member in the target ensemble.
export ACTUAL_ENSEMBLE_SIZE=$(($BDY_MIEMBRO_FIN-$BDY_MIEMBRO_INI))+1    #The number of ensemble members in the original ensemble.
export PERT_AMP=0.05                                                    #The perturbation randomization amplitud (for RejuGauss and RejuUniform )
export PERT_TYPE='RejuGauss'                                            #The type of perturbation transformation (RejuGauss , RejuUniform , Specular )
#The list of variables that whose perturbations will be transformed.
export VAR_LIST='["PRES", "SM", "ST", "GHT", "SKINTEMP","ST100200", "ST040100", "ST010040", "ST000010","SM100200", "SM040100", "SM010040", "SM000010","PSFC", "RH", "UU", "VV", "TT", "PMSL" ]'

[[ $ASIMILACION -ne 0 ]] && source $BASEDIR/conf/experimento.asim
